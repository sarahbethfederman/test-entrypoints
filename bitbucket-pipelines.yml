image: node:latest

pipelines:
  default:

    - step:
        name: ⬇️ Install
        caches:
          - node
        script:
          - yarn 

    - parallel:

      - step:
          name: ✅ Lint
          caches:
            - node
          script:
            - yarn run lint

      - step:
          name: ⚒ Build
          caches:
            - node
          artifacts:
            - "storybook-static/**"
          script:
            - yarn run build

      - step:
          name: 📝 Test
          caches:
            - node
          script:
            - yarn run test

    - step:
        name: 🚀 Deploy
        caches:
          - node
        script:
          - node ./scripts/deploy.js
